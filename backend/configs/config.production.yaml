# Production Configuration Template
# Copy this file and set values via environment variables for security
#
# Required environment variables:
# - MEMEPERP_DATABASE_PASSWORD
# - MEMEPERP_REDIS_PASSWORD
# - MEMEPERP_BLOCKCHAIN_PRIVATE_KEY
# - MEMEPERP_JWT_SECRET
# - MEMEPERP_BLOCKCHAIN_RPC_URL

server:
  addr: ":8080"
  mode: "release"  # Use release mode in production
  read_timeout: 30s
  write_timeout: 30s

database:
  host: "${MEMEPERP_DATABASE_HOST:-postgres}"
  port: 5432
  user: "${MEMEPERP_DATABASE_USER:-memeperp}"
  password: "${MEMEPERP_DATABASE_PASSWORD}"  # REQUIRED - set via env
  dbname: "${MEMEPERP_DATABASE_NAME:-memeperp}"
  sslmode: "require"  # Enable SSL in production
  max_idle_conns: 20
  max_open_conns: 100
  max_lifetime: 1h

redis:
  addr: "${MEMEPERP_REDIS_ADDR:-redis:6379}"
  password: "${MEMEPERP_REDIS_PASSWORD}"  # Set via env
  db: 0
  pool_size: 20

blockchain:
  # Base Mainnet
  rpc_url: "${MEMEPERP_BLOCKCHAIN_RPC_URL}"  # REQUIRED - use Alchemy/Infura
  chain_id: 8453  # Base Mainnet

  # Contract Addresses (Base Mainnet - TO BE DEPLOYED)
  router_address: "${MEMEPERP_ROUTER_ADDRESS}"
  vault_address: "${MEMEPERP_VAULT_ADDRESS}"
  amm_address: "${MEMEPERP_AMM_ADDRESS}"
  position_address: "${MEMEPERP_POSITION_ADDRESS}"
  liquidation_address: "${MEMEPERP_LIQUIDATION_ADDRESS}"
  funding_rate_address: "${MEMEPERP_FUNDING_RATE_ADDRESS}"
  lending_pool_address: "${MEMEPERP_LENDING_POOL_ADDRESS}"
  price_feed_address: "${MEMEPERP_PRICE_FEED_ADDRESS}"
  risk_manager_address: "${MEMEPERP_RISK_MANAGER_ADDRESS}"

  # Keeper private key - NEVER commit this value
  # In production, use a secure key management service (AWS KMS, HashiCorp Vault)
  private_key: "${MEMEPERP_BLOCKCHAIN_PRIVATE_KEY}"

  # Indexer settings
  start_block: 0
  confirm_blocks: 6  # More confirmations for production
  poll_interval: 5s

jwt:
  secret: "${MEMEPERP_JWT_SECRET}"  # REQUIRED - set via env
  expiration: 24h

rate_limit:
  public_limit: 600    # More conservative in production
  private_limit: 300
  order_limit: 100

security:
  # IMPORTANT: Set your production domain here
  allowed_origins:
    - "https://yourdomain.com"
    - "https://www.yourdomain.com"
  trusted_proxies:
    - "10.0.0.0/8"  # Internal network
    - "172.16.0.0/12"  # Docker network

log:
  level: "info"    # Less verbose in production
  format: "json"   # JSON for log aggregation
  output: "stdout"
