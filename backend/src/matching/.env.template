# Matching Engine Environment Variables
# ======================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control

# Server Configuration
# --------------------
PORT=8081

# Blockchain Configuration
# ------------------------
# RPC URL for submitting transactions
# Base Sepolia: https://base-sepolia-rpc.publicnode.com
# Base Mainnet: https://mainnet.base.org
RPC_URL=https://base-sepolia-rpc.publicnode.com

# Chain ID
# Base Sepolia: 84532
# Base Mainnet: 8453
CHAIN_ID=84532

# Settlement Contract Address (REQUIRED)
# Deploy using: forge script script/DeploySettlement.s.sol --rpc-url $RPC_URL --broadcast
SETTLEMENT_ADDRESS=

# Matcher Private Key (REQUIRED)
# SECURITY: This key must be authorized as a matcher in the Settlement contract
# The account needs ETH for gas to submit batch settlements
# NEVER commit this value to git!
MATCHER_PRIVATE_KEY=

# Batch Settlement Configuration
# ------------------------------
# Interval (in ms) between batch settlement submissions
# Lower = faster settlement, higher gas costs
# Recommended: 30000 (30 seconds) for production
BATCH_INTERVAL_MS=30000

# Minimum matches required before submitting a batch
# Helps reduce gas costs by batching more trades together
MIN_BATCH_SIZE=1

# Maximum matches per batch submission
# Prevents gas limit issues
MAX_BATCH_SIZE=50

# Insurance Fund Address (for deficit handling)
# ---------------------------------------------
INSURANCE_FUND_ADDRESS=

# Fee Configuration
# -----------------
# Fee receiver address
FEE_RECEIVER_ADDRESS=

# Price Oracle Configuration
# --------------------------
# External price feed for liquidation calculations
# Leave empty to use on-chain prices
EXTERNAL_PRICE_FEED_URL=

# Logging
# -------
LOG_LEVEL=info  # Options: debug, info, warn, error

# ======================================
# Setup Instructions
# ======================================
# 1. Deploy Settlement contract:
#    cd contracts && forge script script/DeploySettlement.s.sol --rpc-url $RPC_URL --broadcast
#
# 2. Copy the deployed Settlement address to SETTLEMENT_ADDRESS
#
# 3. Generate a matcher wallet and fund it with ETH
#
# 4. Authorize the matcher in Settlement:
#    cast send $SETTLEMENT_ADDRESS "setAuthorizedMatcher(address,bool)" $MATCHER_ADDRESS true --rpc-url $RPC_URL --private-key $OWNER_KEY
#
# 5. Set MATCHER_PRIVATE_KEY to the matcher's private key
#
# 6. Start the matching engine:
#    npm run dev
